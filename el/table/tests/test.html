<!DOCTYPE html>
<html lang=en>

<head>
    <meta charset=utf-8>
    <meta name=viewport content="width=device-width">
    <title>tests</title>

    <script src="../../../u2/tests/test-init.js" type=module async></script>
    <script src="../../../u2/auto.js" type=module async></script>

    <link href="../../../css/classless/full.css" rel=stylesheet>
    <link href="../../../css/classless/simple.css" rel=stylesheet>

    <link href="../table.css" rel=stylesheet>
    <script src="../table.js" type=module async></script>
    <style>
        html {
            x--u2-ico-dir: var(--u2-ico-dir-material);
        }
    </style>

<body>

    <section>
        <u2-responsive id="responsive">
            <u2-table style="white-space:nowrap; max-height:min(60vh, 50rem)" id=test drag-column check-column>
                <table aria-multiselectable="true" data-select-scope="any">
                    <colgroup>
                        <col class="salutation">
                        <col class="name firstname">
                        <col class="name lastname">
                        <col class="age">
                        <col class="category">
                    </colgroup>
                    <thead>
                        <tr>
                            <th> Salut
                            <th data-sort-handler> Firstname
                            <th data-sort-handler> Lastname
                            <th data-sort-handler draggable="true"> Age
                            <th data-sort-handler> X
                    <tbody id=testBody>
                        <tr>
                            <td> Herr
                            <td> Wolfgang Amadeus
                            <td> Mozart
                            <td> 46
                            <td> b
                        <tr>
                            <td> Mr.
                            <td colspan=2 style="text-align:center"> <b>N Colspan 2</b>
                            <td> 88
                            <td> a
                        <tr>
                            <td> Frau
                            <td> Provident, quisquam.
                            <td> Omnis, quisquam.
                            <td> <input type="number" value="22">
                            <td>
                        <tr>
                            <td> Mister
                            <td> Provident, quisquam.
                            <td> Laudens, quisquam.
                            <td data-value=".5"> 6 month
                            <td> z
                    <tfoot>
                        <tr>
                            <td colspan="2">Footer
                            <td>
                            <td data-sum>
                            <td data-count>
                </table>
            </u2-table>
        </u2-responsive>
        <button id=double>
            double items <sup class="u2-badge" style="background:var(--color-light); color:black"></sup>
        </button>
        <script>
            double.addEventListener('click', e => {
                testBody.insertAdjacentHTML('beforeend', testBody.innerHTML)
                double.querySelector('sup').innerHTML = testBody.children.length;
            })
        </script>

        <style>
            .name {
                background: #eaf8;
            }

            .age {
                text-align: right;
            }

            #responsive {
                u2-table {
                    overflow: visible;
                }

                &:state(overflow-1) {

                    table,
                    thead,
                    tbody,
                    tr,
                    td,
                    th {
                        display: block;
                    }

                    thead {
                        display: none;
                    }

                    tbody {
                        display: flex;
                        flex-direction: column;
                        gap: 1rem;
                    }

                    tr {
                        flex: 1;
                        border: 1px solid;
                    }

                    td {
                        text-align: left;
                    }

                    td::before {
                        content: attr(data-title) ':';
                        font-weight: bold;
                    }

                }

                &:state(overflow-2) {
                    td::before {
                        display: block;
                    }

                    td {
                        white-space: wrap;
                    }
                }
            }
        </style>
    </section>

    <u2-code editable trim>
        <style contenteditable>
            thead>tr> [data-sort-handler]::after {
                content: "▲";
                opacity: 0;
            }

            thead>tr>[aria-sort=ascending]::after {
                opacity: 1;
                content: "▲";
            }

            thead>tr>[aria-sort=descending]::after {
                opacity: 1;
                content: "▼";
            }

            tbody>tr {
                &:hover {
                    background: #f5f5f5;
                }

                &:has(:checked) {
                    background: #ddd;
                }
            }
        </style>
    </u2-code>

    <script type=module>
        // console.log(test.columns)
        // console.log(test.columns.item(2))
        // console.log(test.columns.item(2).cells);
    </script>