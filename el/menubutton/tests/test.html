<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset="utf-8">
    <meta name=viewport content="width=device-width">
    <title>Test</title>

    <link rel=stylesheet href="../../../css/classless/full.css">
    <link rel=stylesheet href="../../../css/classless/simple.css">

    <script src="../../../u2/auto.js" type=module async></script>

    <link rel=stylesheet href="../menubutton.css">
    <script src="../menubutton.js" type=module async></script>

    <style>
    html {
        --u2-ico-dir: var(--u2-ico-dir-material)
    }
    </style>

</head>

<body>

<header>
    <h1>u2-menubutton test</h1>
</header>

<section>
    <u2-menubutton>
        <button>Add Item ▾</button>
        <menu>
            <li><button>Special Item</button>
            <li><button>Super Item</button>
        </menu>
    </u2-menubutton>
    <button>
        normal button for reference
    </button>
</section>  

<article>
    <u2-menubutton>
        <button>
            <u2-ico inline>home</u2-ico>
            Add
        </button>
        <menu>
            <li> <button>Domain</button>
            <li> <button>Subdomain</button>
            <li> <button>Alias Domain</button>
            <li> <hr>
            <li> <button>Remove</button>
            <li> <button>Remove All</button>
        </menu>
    </u2-menubutton>
</article>

<article>
    <h2>JS needed:</h3>

    <h3>No button</h3>
    <u2-menubutton>
        <menu>
            <li> <button>Do this</button>
            <li> <button>Do that other thing</button>
        </menu>
    </u2-menubutton>

    <h3>Inside overflow:hidden</h3>
    <div style="overflow:hidden; padding:2rem; border:1px solid black">
        <u2-menubutton>
            <button>▾</button>
            <menu>
                <li> <button>Do this</button>
                <li> <button>Do that other thing</button>
            </menu>
        </u2-menubutton>
    </div>

</article>

<section>
    <h2>Attribute: openby</h2>
    <u2-menubutton openby="none (click only)">
        <button>click</button>
        <menu>
            <li> <button>Do this</button>
            <li> <button>Do that other thing</button>
        </menu>
    </u2-menubutton>
    <u2-menubutton openby="hover">
        <button>hover</button>
        <menu>
            <li> <button>Do this</button>
            <li> <button>Do that other thing</button>
        </menu>
    </u2-menubutton>
    <u2-menubutton openby="focus">
        <button>focus</button>
        <menu>
            <li> <button>Do this</button>
            <li> <button>Do that other thing</button>
        </menu>
    </u2-menubutton>
    <u2-menubutton openby="focus hover">
        <button>focus and hover</button>
        <menu>
            <li> <button>Do this</button>
            <li> <button>Do that other thing</button>
        </menu>
    </u2-menubutton>
</section>

<u2-code trim editable>
    <style style="display: block" contenteditable>
    u2-menubutton menu {
        box-shadow: 0 0 1rem #0008;
        border:none;
    }
    u2-menubutton menu button {
        text-align:left;
    }

    u2-menubutton menu {
        /* 1. Der "geschlossene" Zustand (Ziel beim Schließen) */
        opacity: 0;
        transform: translateY(-8px) scale(0.95); /* Leicht nach oben + kleiner */

        /* 2. Transition-Setup */
        transition: 
            opacity 0.2s ease-out,
            transform 0.2s cubic-bezier(0.2, 0, 0.2, 1), /* "Snappy" Bewegung */
            display 0.2s allow-discrete, /* Zwingend nötig für Exit-Animation */
            overlay 0.2s allow-discrete; /* Zwingend nötig für Top-Layer */
    }

    /* 3. Der "offene" Zustand */
    u2-menubutton menu:popover-open {
        opacity: 1;
        transform: translateY(0) scale(1);
    }

    /* 4. Der Startpunkt beim Öffnen (Entry-Animation) */
    @starting-style {
        u2-menubutton menu:popover-open {
            opacity: 0;
            transform: translateY(-8px) scale(0.95);
        }
    }

    </style>
</u2-code>
