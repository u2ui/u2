<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset=utf-8>
    <meta name=viewport content="width=device-width">
    <title>test</title>

    <script src="../../../u2/tests/test-init.js" type=module async></script>
    <script src="../../../u2/auto.js" type=module async></script>
    <link rel=stylesheet href="../../../css/classless/simple.css">

    <link href="../responsive.css" rel=stylesheet>
    <script src="../responsive.js" type=module async></script>

<body>

<u2-code trim editable>
    <style>
        u2-responsive {
            &:state(hide-optional1) .optional1 {
                display: none;
            }
            &:state(hide-optional2) .optional2 {
                display: none;
            }
            &:state(break) td {
                display: block;
                width: 100%;
            }
            &:state(break) tr {
                display: block;
                margin-bottom: 1rem;
                border: 2px solid #000;
            }
        }
        td {
            border: 1px solid #000;
            padding: 1rem;
            white-space:nowrap;
        }
    </style>
</u2-code>

<section style="resize:both; overflow:auto; padding:2rem; border:1px solid black">
    <u2-responsive strategies="hide-optional1 hide-optional2 break">
        <table>
            <tr>
                <td>Test</td>
                <td>Test</td>
                <td class="optional1">Optional 1</td>
                <td class="optional2">Optional 2</td>
                <td>Test</td>
                <td>Test</td>
            </tr>
            <tr>
                <td>Test</td>
                <td>Test</td>
                <td class="optional1">Optional 1</td>
                <td class="optional2">Optional 2</td>
                <td>Test</td>
                <td>Test</td>
            </tr>
            <tr>
                <td>Test</td>
                <td>Test</td>
                <td class="optional1">Optional 1</td>
                <td class="optional2">Optional 2</td>
                <td>Test</td>
                <td>Test</td>
            </tr>
        </table>
    </u2-responsive>
</section>

<div style="margin-top: 2rem; padding: 1rem; background: #f0f0f0; border-radius: 4px;">
    <strong>Event Log:</strong>
    <div id="log" style="font-family: monospace; font-size: 0.7rem; overflow:auto; max-height:20rem"></div>
</div>


<script>

// Event Listener Demo
const responsive = document.querySelector('u2-responsive');
const log = document.getElementById('log');

responsive.addEventListener('u2-responsive-strategy-add', (e) => {
    const entry = document.createElement('div');
    entry.style.color = 'green';
    entry.textContent = `✓ Strategy added: ${e.detail.strategy}`;
    log.prepend(entry);

    // Example: Prevent a specific strategy
    // if (e.detail.strategy === 'break') {
    //     e.preventDefault();
    // }
});

responsive.addEventListener('u2-responsive-strategy-remove', (e) => {
    const entry = document.createElement('div');
    entry.style.color = 'red';
    entry.textContent = `✗ Strategy removed: ${e.detail.strategy}`;
    log.prepend(entry);
});


</script>